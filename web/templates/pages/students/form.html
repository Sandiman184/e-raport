{% extends "layouts/base.html" %}

{% block title_icon %}<i data-lucide="{{ 'user-check' if student else 'user-plus' }}"></i>{% endblock %}
{% block title %}{{ 'Edit Data Santri' if student else 'Tambah Santri Baru' }}{% endblock %}

{% block content %}
<div class="bg-white rounded-xl shadow border border-gray-200 p-6 max-w-2xl mx-auto">
    <div class="mb-6 pb-4 border-b">
        <h2 class="text-xl font-bold text-gray-800">{{ 'Edit Data Santri' if student else 'Form Data Santri' }}</h2>
        <p class="text-sm text-gray-500">Silakan lengkapi data santri di bawah ini.</p>
    </div>

    {% if error %}
    <div class="bg-red-50 text-red-700 p-3 rounded mb-4 border border-red-200 font-medium">
        {{ error }}
    </div>
    {% endif %}

    <form method="post">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

        <div class="space-y-6">
            <!-- Nama Lengkap -->
            <div>
                <label class="block text-sm font-bold text-gray-700 mb-2">Nama Lengkap</label>
                <input type="text" name="name" required value="{{ student.name if student else '' }}"
                    class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-teal-500 focus:border-teal-500 bg-white text-gray-900 placeholder-gray-400 transition"
                    placeholder="Contoh: Ahmad Fauzan">
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- NIS / NISM -->
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2">Nomor Induk (NIS/NISM)</label>
                    <input type="number" name="nis" required value="{{ student.nis if student else '' }}"
                        class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-teal-500 focus:border-teal-500 bg-white text-gray-900 transition"
                        placeholder="123456">
                </div>

                <!-- Jenis Kelamin -->
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2">Jenis Kelamin</label>
                    <div class="relative">
                        <select name="gender"
                            class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-teal-500 focus:border-teal-500 bg-white text-gray-900 appearance-none transition">
                            <option value="L" {{ 'selected' if student and student.gender == 'L' else '' }}>Laki-laki</option>
                            <option value="P" {{ 'selected' if student and student.gender == 'P' else '' }}>Perempuan</option>
                        </select>
                        <div
                            class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                            <i data-lucide="chevron-down" class="w-4 h-4"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="mt-8 pt-6 border-t border-gray-100 flex justify-end gap-3">
            <a href="{{ url_for('students.index') }}"
                class="px-5 py-2.5 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium transition">
                Batal
            </a>
            <button type="submit"
                class="px-6 py-2.5 bg-teal-600 hover:bg-teal-700 text-white rounded-lg font-bold shadow transition flex items-center gap-2">
                <i data-lucide="save" class="w-4 h-4"></i> Simpan Data
            </button>
        </div>
    </form>
</div>
{% endblock %}